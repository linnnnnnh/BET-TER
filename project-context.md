Project Context: PSG Fan Engagement Platform (from Escalidraw)This document provides the complete context for an AI development agent to build a responsive, mobile-first React web application based on the provided Escalidraw diagram.1. Project Vision & Core LoopThe project is a two-phase fan engagement platform designed to be used during PSG matches, with a special focus on promoting women's team integration through a social impact treasury model.Phase 1 (First Half - The Prediction Game): Starting one hour before the match, fans answer prediction questions about the first half. An AI chatbot can assist users with information to help them make their predictions. Correct answers reward users with "Free Play Tickets" for the halftime game.Phase 2 (Halftime - The Heatmap Game): During halftime, fans play an interactive "Heatmap" mini-game. They can use their earned Free Play Tickets or purchase plays. The outcome determines if they win a tiered reward.Consolation Prize: Users who do not win a main prize receive a unique, AI-generated video featuring themselves and a football player as a fun, shareable reward for participation.Treasury for Social Impact: Funds from purchased plays are sent to a treasury wallet, with 30% dedicated to promoting women's inclusion initiatives and 70% used for protocol rewards and partnerships.2. The User JourneyPrediction Phase (1H before match -> Halftime): A user opens the web app and answers prediction questions. They can interact with an AI chatbot for assistance.Halftime Begins: The prediction market is resolved. The user is notified of how many Free Play Tickets they have won.Gameplay: The user navigates to the Heatmap game.If they have tickets, they can play for free.If not, they can purchase plays using $CHZ or $PSG tokens. The price is dynamically pegged to €1.00 for men's matches and €0.50 for women's matches.Game Outcome:Win: The user wins a reward from a tiered prize pool (split between Online and On-Site rewards).No Win: The user is prompted to generate their AI consolation video.Reward Redemption: All won prizes and coupons are available in a "My Rewards" section of the app, with QR codes for on-site redemption.3. Key FeaturesTwo-Phase Gameplay: A prediction market followed by a halftime mini-game.AI Chatbot Assistant: An integrated chatbot to help users with their predictions.Dynamic Pricing: Supports both $CHZ and $PSG. Price is pegged to a fiat value via the Pyth oracle and is 50% cheaper for women's team matches.AI Video Consolation Prize: A unique reward for non-winning plays, generated via an external AI video API.Tiered Reward System: A detailed prize structure with different tiers for Online and On-Site rewards, each with a set number of winners.Social Impact Treasury: On-chain logic to split incoming funds (30/70) between a women's inclusion fund and the protocol's treasury.Web3 Integration: Secure wallet connection via WalletConnect, managed by wagmi.4. Tech StackFrontend: React (with TypeScript), Vite, Tailwind CSS.Web3: wagmi and viem for hooks and contract interaction.UI/UX: shadcn/ui for components, Framer Motion for animations.APIs:AI Chatbot: Integration with a conversational AI API (e.g., Gemini API).AI Video Generation: Integration with an AI video synthesis API.Utilities: react-router-dom for routing, qrcode.react for redemption codes.5. Smart Contract DesignThe smart contract must be updated to reflect the Escalidraw's logic:Multi-Token Payment: The playHeatmap function must be able to accept payments in either $CHZ or $PSG (this will require an on-chain price source or a DEX router integration to normalize value).Treasury Split: Implement a splitFunds() function that automatically sends 30% of incoming payments to a designated womensInclusionWallet and 70% to the protocolTreasury.Tiered Prize Events: Instead of storing all prize details on-chain, the contract should emit an event like PrizeWon(address user, uint256 prizeTier). An off-chain service will listen for this event and assign the specific reward based on the tier (e.g., Tier 1 On-Site = Photo with Player). This is more gas-efficient and flexible.Consolation Event: When a user doesn't win a main prize, the contract should emit a ConsolationPrize(address user) event. The off-chain application backend will listen for this and trigger the AI video generation process.6. Development RoadmapSetup: Initialize Vite project, configure Tailwind, and install all dependencies.Web3 Config: Configure wagmi and Web3Modal for wallet connections.Build Core UI: Set up routing and build the main pages/components (PredictionCard, HeatmapGrid, RewardCard).Build Prediction Flow:Fetch prediction questions from the smart contract.Integrate the AI Chatbot API into the prediction interface.Allow users to submit predictions to the smart contract.Build Heatmap Game Flow:Implement logic to check for and use Free Play Tickets.Implement the multi-token payment logic, fetching dynamic prices via Pyth.Trigger the Chainlink VRF request upon play.Build Reward & Consolation Flow:Set up a backend listener for contract events (PrizeWon, ConsolationPrize).On PrizeWon, assign and display the correct reward from the tiered prize pool.On ConsolationPrize, trigger the AI Video Generation API and notify the user when their video is ready.Deployment: Deploy the React app to Vercel/Netlify and the listener service to a serverless function provider.